[
  {
    "metric_id": "7c5a3d91-4b2e-4f19-a8c7-9e2f1b8d6c4a",
    "type": "business_metric",
    "database_id": "46cb1ce1-848b-4561-bed7-1f35c1a81a5c",
    "metric_name": {
      "en": "Customer Lifetime Value",
      "th": "มูลค่าตลอดชีพของลูกค้า"
    },
    "short_name": "CLV",
    "description": {
      "en": "Total revenue generated by a customer across all orders since enrollment. Used for customer segmentation and marketing budget allocation.",
      "th": "รายได้รวมที่ลูกค้าสร้างจากคำสั่งซื้อทั้งหมดนับตั้งแต่ลงทะเบียน ใช้สำหรับการแบ่งกลุ่มลูกค้าและจัดสรรงบการตลาด"
    },
    "business_domain": "customer-analytics",
    "calculation_logic": "SUM(Order_Total) grouped by CustomerId for all completed orders",
    "sql_expression": "SELECT CustomerId, SUM(Order_Total) AS CLV FROM dbo.CRM_Order GROUP BY CustomerId",
    "relevant_table_ids": ["b1c181fd-3af6-4af9-9ce8-bb0fdd5ef884"],
    "relevant_column_ids": ["b4f5ed31-2901-435d-95a7-4f87cb6805b6", "64eaa9b2-a63e-44c7-9f76-8738cd0d80a9"],
    "unit_of_measure": "THB",
    "aggregation_type": "SUM",
    "grain": "customer",
    "business_owner": "crm-analytics",
    "refresh_schedule": "daily",
    "typical_range": {"min": 100, "median": 2450, "p95": 18500, "max": 250000},
    "related_metrics": ["avg_order_value", "order_frequency"],
    "common_filters": ["registration_date >= '2024-01-01'", "Point_Balance > 0"],
    "tags": ["revenue", "customer", "kpi"],
    "usage_frequency": 342,
    "last_queried": "2025-09-28T14:32:00Z",
    "embedding": {
      "model": "openai/text-embedding-3-small",
      "dimension": 1536,
      "vector": "[... 1536 dimensions ...]",
      "generated_at": "2025-09-29T10:15:00Z",
      "source": "metric_name + description + calculation_logic"
    }
  },
  {
    "metric_id": "a3f7e9d2-8c1b-4a5e-9f3d-7b6c2e4a1d8f",
    "type": "business_metric",
    "database_id": "46cb1ce1-848b-4561-bed7-1f35c1a81a5c",
    "metric_name": {
      "en": "Average Order Value",
      "th": "มูลค่าเฉลี่ยต่อคำสั่งซื้อ"
    },
    "short_name": "AOV",
    "description": {
      "en": "Mean transaction value per order. Key metric for promotional effectiveness and basket optimization.",
      "th": "มูลค่าธุรกรรมเฉลี่ยต่อคำสั่งซื้อ ตัวชี้วัดสำคัญสำหรับประสิทธิภาพโปรโมชั่นและการเพิ่มมูลค่าตะกร้า"
    },
    "business_domain": "sales-analytics",
    "calculation_logic": "Average of Order_Total across all orders",
    "sql_expression": "SELECT AVG(Order_Total) AS AOV FROM dbo.CRM_Order",
    "relevant_table_ids": ["b1c181fd-3af6-4af9-9ce8-bb0fdd5ef884"],
    "relevant_column_ids": ["64eaa9b2-a63e-44c7-9f76-8738cd0d80a9"],
    "unit_of_measure": "THB",
    "aggregation_type": "AVG",
    "grain": "order",
    "business_owner": "sales-ops",
    "refresh_schedule": "hourly",
    "typical_range": {"min": 50, "median": 685, "p95": 3299, "max": 14500},
    "related_metrics": ["clv", "basket_size", "items_per_order"],
    "common_filters": ["Order_Date >= DATEADD(month, -3, GETDATE())"],
    "tags": ["sales", "basket", "kpi"],
    "usage_frequency": 156,
    "last_queried": "2025-09-29T09:45:00Z",
    "embedding": {
      "model": "openai/text-embedding-3-small",
      "dimension": 1536,
      "vector": "[... 1536 dimensions ...]",
      "generated_at": "2025-09-29T10:15:00Z",
      "source": "metric_name + description + calculation_logic"
    }
  },
  {
    "metric_id": "e8b4c6d1-9a7f-4e2c-b5d3-8f1a9c7e6b4d",
    "type": "business_metric",
    "database_id": "46cb1ce1-848b-4561-bed7-1f35c1a81a5c",
    "metric_name": {
      "en": "Active Loyalty Members",
      "th": "สมาชิกสะสมแต้มที่ใช้งานอยู่"
    },
    "short_name": "Active Members",
    "description": {
      "en": "Count of customers who have made at least one purchase in the last 90 days and have non-zero point balance.",
      "th": "จำนวนลูกค้าที่มีการซื้อสินค้าอย่างน้อย 1 ครั้งใน 90 วันที่ผ่านมาและมีคะแนนคงเหลือมากกว่า 0"
    },
    "business_domain": "loyalty-program",
    "calculation_logic": "COUNT DISTINCT customers with orders in last 90 days AND Point_Balance > 0",
    "sql_expression": "SELECT COUNT(DISTINCT c.CustomerId) AS Active_Members FROM dbo.CRM_Customer c INNER JOIN dbo.CRM_Order o ON c.CustomerId = o.CustomerId WHERE o.Order_Date >= DATEADD(day, -90, GETDATE()) AND c.Point_Balance > 0",
    "relevant_table_ids": ["02c6bbd5-0c74-4193-a9cb-a84e3ccd0429", "b1c181fd-3af6-4af9-9ce8-bb0fdd5ef884"],
    "relevant_column_ids": ["f3d3a3df-6c4a-4dba-b1b9-2d4cb1122334", "c2d62be6-6ef3-49a3-b5d4-0fa3b537ce96", "b8a47e73-145a-4b89-91cd-e743cde1a507"],
    "unit_of_measure": "count",
    "aggregation_type": "COUNT_DISTINCT",
    "grain": "program",
    "business_owner": "loyalty-team",
    "refresh_schedule": "daily",
    "typical_range": {"min": 145000, "median": 182000, "p95": 198000, "max": 210000},
    "related_metrics": ["churn_rate", "enrollment_rate", "point_redemption_rate"],
    "common_filters": ["registration_date >= '2023-01-01'"],
    "tags": ["loyalty", "engagement", "kpi"],
    "usage_frequency": 89,
    "last_queried": "2025-09-29T08:20:00Z",
    "embedding": {
      "model": "openai/text-embedding-3-small",
      "dimension": 1536,
      "vector": "[... 1536 dimensions ...]",
      "generated_at": "2025-09-29T10:15:00Z",
      "source": "metric_name + description + calculation_logic"
    }
  },
  {
    "metric_id": "b9c7e4f2-3a8d-4e1b-9f6c-5d7a2e8b1c4f",
    "type": "business_metric",
    "database_id": "46cb1ce1-848b-4561-bed7-1f35c1a81a5c",
    "metric_name": {
      "en": "Customer Churn Rate",
      "th": "อัตราการสูญเสียลูกค้า"
    },
    "short_name": "Churn Rate",
    "description": {
      "en": "Percentage of customers who have not made a purchase in the last 180 days. Critical metric for retention campaigns and customer health monitoring.",
      "th": "เปอร์เซ็นต์ของลูกค้าที่ไม่มีการซื้อสินค้าใน 180 วันที่ผ่านมา ตัวชี้วัดสำคัญสำหรับแคมเปญรักษาลูกค้าและการติดตามสุขภาพลูกค้า"
    },
    "business_domain": "customer-retention",
    "calculation_logic": "COUNT(customers with no orders in 180 days) / COUNT(total customers) * 100",
    "sql_expression": "SELECT (COUNT(DISTINCT CASE WHEN o.Order_Date < DATEADD(day, -180, GETDATE()) THEN c.CustomerId END) * 100.0 / COUNT(DISTINCT c.CustomerId)) AS Churn_Rate FROM dbo.CRM_Customer c LEFT JOIN dbo.CRM_Order o ON c.CustomerId = o.CustomerId",
    "relevant_table_ids": ["02c6bbd5-0c74-4193-a9cb-a84e3ccd0429", "b1c181fd-3af6-4af9-9ce8-bb0fdd5ef884"],
    "relevant_column_ids": ["f3d3a3df-6c4a-4dba-b1b9-2d4cb1122334", "b8a47e73-145a-4b89-91cd-e743cde1a507"],
    "unit_of_measure": "percentage",
    "aggregation_type": "CALCULATED_RATIO",
    "grain": "program",
    "business_owner": "retention-team",
    "refresh_schedule": "weekly",
    "typical_range": {"min": 8.5, "median": 15.2, "p95": 22.8, "max": 35.0},
    "related_metrics": ["active_members", "reactivation_rate", "customer_lifetime"],
    "common_filters": ["exclude_test_accounts = 1"],
    "tags": ["retention", "churn", "risk", "kpi"],
    "usage_frequency": 67,
    "last_queried": "2025-09-27T11:15:00Z",
    "embedding": {
      "model": "openai/text-embedding-3-small",
      "dimension": 1536,
      "vector": "[... 1536 dimensions ...]",
      "generated_at": "2025-09-29T10:15:00Z",
      "source": "metric_name + description + calculation_logic"
    }
  },
  {
    "metric_id": "c4f8e9a3-7d2b-4e6c-9a1f-8b5d3e7c2a4d",
    "type": "business_metric",
    "database_id": "46cb1ce1-848b-4561-bed7-1f35c1a81a5c",
    "metric_name": {
      "en": "Purchase Frequency",
      "th": "ความถี่ในการซื้อ"
    },
    "short_name": "Purchase Freq",
    "description": {
      "en": "Average number of orders per customer per year. Indicates shopping behavior patterns and customer engagement level.",
      "th": "จำนวนคำสั่งซื้อเฉลี่ยต่อลูกค้าต่อปี บ่งบอกรูปแบบพฤติกรรมการช็อปปิ้งและระดับการมีส่วนร่วมของลูกค้า"
    },
    "business_domain": "customer-behavior",
    "calculation_logic": "COUNT(orders) / COUNT(DISTINCT customers) per year",
    "sql_expression": "SELECT (COUNT(o.OrderId) * 1.0 / COUNT(DISTINCT o.CustomerId)) AS Purchase_Frequency FROM dbo.CRM_Order o WHERE o.Order_Date >= DATEADD(year, -1, GETDATE())",
    "relevant_table_ids": ["b1c181fd-3af6-4af9-9ce8-bb0fdd5ef884"],
    "relevant_column_ids": ["5ecbd02b-07df-4e2f-9358-4c4101fdfd6c", "b4f5ed31-2901-435d-95a7-4f87cb6805b6", "b8a47e73-145a-4b89-91cd-e743cde1a507"],
    "unit_of_measure": "orders_per_customer_per_year",
    "aggregation_type": "CALCULATED_RATIO",
    "grain": "customer",
    "business_owner": "analytics-team",
    "refresh_schedule": "weekly",
    "typical_range": {"min": 1.2, "median": 4.8, "p95": 15.6, "max": 52.0},
    "related_metrics": ["clv", "aov", "days_between_purchases"],
    "common_filters": ["Order_Date >= DATEADD(year, -1, GETDATE())"],
    "tags": ["frequency", "behavior", "engagement"],
    "usage_frequency": 94,
    "last_queried": "2025-09-28T16:45:00Z",
    "embedding": {
      "model": "openai/text-embedding-3-small",
      "dimension": 1536,
      "vector": "[... 1536 dimensions ...]",
      "generated_at": "2025-09-29T10:15:00Z",
      "source": "metric_name + description + calculation_logic"
    }
  },
  {
    "metric_id": "d7e9f2a4-8c3b-4d1e-9f5a-7b6c4e2d8a1f",
    "type": "business_metric",
    "database_id": "46cb1ce1-848b-4561-bed7-1f35c1a81a5c",
    "metric_name": {
      "en": "Point Redemption Rate",
      "th": "อัตราการใช้คะแนนสะสม"
    },
    "short_name": "Redemption Rate",
    "description": {
      "en": "Percentage of earned loyalty points that have been redeemed. Measures program engagement and perceived value of rewards.",
      "th": "เปอร์เซ็นต์ของคะแนนสะสมที่ได้รับที่ถูกใช้ไปแล้ว วัดการมีส่วนร่วมในโปรแกรมและมูลค่าที่รับรู้ของรางวัล"
    },
    "business_domain": "loyalty-program",
    "calculation_logic": "(Total redeemed points / Total earned points) * 100",
    "sql_expression": "SELECT (SUM(Points_Redeemed) * 100.0 / NULLIF(SUM(Points_Earned), 0)) AS Redemption_Rate FROM dbo.CRM_PointTransaction WHERE Transaction_Date >= DATEADD(year, -1, GETDATE())",
    "relevant_table_ids": ["02c6bbd5-0c74-4193-a9cb-a84e3ccd0429"],
    "relevant_column_ids": ["c2d62be6-6ef3-49a3-b5d4-0fa3b537ce96"],
    "unit_of_measure": "percentage",
    "aggregation_type": "CALCULATED_RATIO",
    "grain": "program",
    "business_owner": "loyalty-team",
    "refresh_schedule": "daily",
    "typical_range": {"min": 15.5, "median": 38.7, "p95": 62.3, "max": 85.0},
    "related_metrics": ["point_balance", "point_expiry_rate", "reward_catalog_utilization"],
    "common_filters": ["Transaction_Date >= DATEADD(year, -1, GETDATE())"],
    "tags": ["loyalty", "redemption", "engagement", "kpi"],
    "usage_frequency": 78,
    "last_queried": "2025-09-29T07:30:00Z",
    "embedding": {
      "model": "openai/text-embedding-3-small",
      "dimension": 1536,
      "vector": "[... 1536 dimensions ...]",
      "generated_at": "2025-09-29T10:15:00Z",
      "source": "metric_name + description + calculation_logic"
    }
  },
  {
    "metric_id": "e5a8c9f1-4d7b-4e2c-9f8a-6b3d5e7c1a2f",
    "type": "business_metric",
    "database_id": "46cb1ce1-848b-4561-bed7-1f35c1a81a5c",
    "metric_name": {
      "en": "Customer Acquisition Cost",
      "th": "ต้นทุนการได้มาซึ่งลูกค้า"
    },
    "short_name": "CAC",
    "description": {
      "en": "Total marketing spend divided by number of new customers acquired. Critical for evaluating marketing ROI and growth efficiency.",
      "th": "ค่าใช้จ่ายการตลาดรวมหารด้วยจำนวนลูกค้าใหม่ที่ได้มา สำคัญสำหรับการประเมิน ROI การตลาดและประสิทธิภาพการเติบโต"
    },
    "business_domain": "marketing-analytics",
    "calculation_logic": "SUM(marketing_spend) / COUNT(new customers) for period",
    "sql_expression": "SELECT (SUM(m.Campaign_Cost) / NULLIF(COUNT(DISTINCT c.CustomerId), 0)) AS CAC FROM dbo.Marketing_Campaign m CROSS JOIN dbo.CRM_Customer c WHERE c.Registration_Date BETWEEN m.Campaign_Start AND m.Campaign_End",
    "relevant_table_ids": ["02c6bbd5-0c74-4193-a9cb-a84e3ccd0429"],
    "relevant_column_ids": ["f3d3a3df-6c4a-4dba-b1b9-2d4cb1122334"],
    "unit_of_measure": "THB",
    "aggregation_type": "CALCULATED_RATIO",
    "grain": "program",
    "business_owner": "marketing-team",
    "refresh_schedule": "monthly",
    "typical_range": {"min": 85, "median": 245, "p95": 580, "max": 1200},
    "related_metrics": ["clv", "cac_payback_period", "marketing_roi"],
    "common_filters": ["Campaign_Start >= DATEADD(quarter, -1, GETDATE())"],
    "tags": ["marketing", "acquisition", "cost", "roi"],
    "usage_frequency": 45,
    "last_queried": "2025-09-26T14:20:00Z",
    "embedding": {
      "model": "openai/text-embedding-3-small",
      "dimension": 1536,
      "vector": "[... 1536 dimensions ...]",
      "generated_at": "2025-09-29T10:15:00Z",
      "source": "metric_name + description + calculation_logic"
    }
  },
  {
    "metric_id": "f9b7e4a2-6c8d-4e3b-9a1f-5d7c3e2b8a4d",
    "type": "business_metric",
    "database_id": "46cb1ce1-848b-4561-bed7-1f35c1a81a5c",
    "metric_name": {
      "en": "Repeat Purchase Rate",
      "th": "อัตราการซื้อซ้ำ"
    },
    "short_name": "RPR",
    "description": {
      "en": "Percentage of customers who have made more than one purchase. Key indicator of product satisfaction and loyalty program effectiveness.",
      "th": "เปอร์เซ็นต์ของลูกค้าที่ซื้อสินค้ามากกว่า 1 ครั้ง ตัวชี้วัดสำคัญของความพึงพอใจสินค้าและประสิทธิภาพโปรแกรมสะสมแต้ม"
    },
    "business_domain": "customer-retention",
    "calculation_logic": "(COUNT customers with >1 order / COUNT all customers) * 100",
    "sql_expression": "SELECT (COUNT(DISTINCT CASE WHEN order_count > 1 THEN CustomerId END) * 100.0 / COUNT(DISTINCT CustomerId)) AS RPR FROM (SELECT CustomerId, COUNT(OrderId) as order_count FROM dbo.CRM_Order GROUP BY CustomerId) sub",
    "relevant_table_ids": ["b1c181fd-3af6-4af9-9ce8-bb0fdd5ef884"],
    "relevant_column_ids": ["b4f5ed31-2901-435d-95a7-4f87cb6805b6", "5ecbd02b-07df-4e2f-9358-4c4101fdfd6c"],
    "unit_of_measure": "percentage",
    "aggregation_type": "CALCULATED_RATIO",
    "grain": "program",
    "business_owner": "retention-team",
    "refresh_schedule": "weekly",
    "typical_range": {"min": 45.2, "median": 62.8, "p95": 78.5, "max": 85.0},
    "related_metrics": ["purchase_frequency", "customer_lifetime", "first_to_second_purchase_days"],
    "common_filters": ["exclude_test_accounts = 1"],
    "tags": ["retention", "repeat", "loyalty", "kpi"],
    "usage_frequency": 112,
    "last_queried": "2025-09-29T10:10:00Z",
    "embedding": {
      "model": "openai/text-embedding-3-small",
      "dimension": 1536,
      "vector": "[... 1536 dimensions ...]",
      "generated_at": "2025-09-29T10:15:00Z",
      "source": "metric_name + description + calculation_logic"
    }
  },
  {
    "metric_id": "a6c8e9f3-5d2b-4e7c-9a4f-7b1d3e5c8a2d",
    "type": "business_metric",
    "database_id": "46cb1ce1-848b-4561-bed7-1f35c1a81a5c",
    "metric_name": {
      "en": "Net Promoter Score",
      "th": "คะแนนความพึงพอใจลูกค้า"
    },
    "short_name": "NPS",
    "description": {
      "en": "Customer satisfaction score based on likelihood to recommend (Promoters minus Detractors). Industry standard for measuring customer loyalty and satisfaction.",
      "th": "คะแนนความพึงพอใจลูกค้าตามโอกาสที่จะแนะนำ (ผู้สนับสนุนลบผู้วิจารณ์) มาตรฐานอุตสาหกรรมสำหรับวัดความจงรักภักดีและความพึงพอใจของลูกค้า"
    },
    "business_domain": "customer-satisfaction",
    "calculation_logic": "(COUNT promoters - COUNT detractors) / COUNT total respondents * 100",
    "sql_expression": "SELECT ((SUM(CASE WHEN NPS_Score >= 9 THEN 1 ELSE 0 END) - SUM(CASE WHEN NPS_Score <= 6 THEN 1 ELSE 0 END)) * 100.0 / COUNT(*)) AS NPS FROM dbo.Customer_Feedback WHERE Survey_Date >= DATEADD(quarter, -1, GETDATE())",
    "relevant_table_ids": ["02c6bbd5-0c74-4193-a9cb-a84e3ccd0429"],
    "relevant_column_ids": ["f3d3a3df-6c4a-4dba-b1b9-2d4cb1122334"],
    "unit_of_measure": "score",
    "aggregation_type": "CALCULATED_RATIO",
    "grain": "program",
    "business_owner": "customer-experience-team",
    "refresh_schedule": "monthly",
    "typical_range": {"min": -15, "median": 35, "p95": 65, "max": 85},
    "related_metrics": ["customer_satisfaction", "churn_rate", "clv"],
    "common_filters": ["Survey_Date >= DATEADD(quarter, -1, GETDATE())", "Survey_Completed = 1"],
    "tags": ["satisfaction", "nps", "loyalty", "kpi"],
    "usage_frequency": 56,
    "last_queried": "2025-09-25T09:30:00Z",
    "embedding": {
      "model": "openai/text-embedding-3-small",
      "dimension": 1536,
      "vector": "[... 1536 dimensions ...]",
      "generated_at": "2025-09-29T10:15:00Z",
      "source": "metric_name + description + calculation_logic"
    }
  },
  {
    "metric_id": "b3d7e9a4-8c2f-4e6b-9a5c-7d1e4f8c2a3d",
    "type": "business_metric",
    "database_id": "46cb1ce1-848b-4561-bed7-1f35c1a81a5c",
    "metric_name": {
      "en": "Revenue per Customer",
      "th": "รายได้ต่อลูกค้า"
    },
    "short_name": "RPC",
    "description": {
      "en": "Average revenue generated per customer within a specific period. Used for forecasting and comparing customer segments.",
      "th": "รายได้เฉลี่ยที่สร้างต่อลูกค้าภายในช่วงเวลาที่กำหนด ใช้สำหรับการคาดการณ์และเปรียบเทียบกลุ่มลูกค้า"
    },
    "business_domain": "revenue-analytics",
    "calculation_logic": "SUM(Order_Total) / COUNT(DISTINCT CustomerId) for period",
    "sql_expression": "SELECT (SUM(o.Order_Total) / NULLIF(COUNT(DISTINCT o.CustomerId), 0)) AS RPC FROM dbo.CRM_Order o WHERE o.Order_Date >= DATEADD(month, -12, GETDATE())",
    "relevant_table_ids": ["b1c181fd-3af6-4af9-9ce8-bb0fdd5ef884"],
    "relevant_column_ids": ["b4f5ed31-2901-435d-95a7-4f87cb6805b6", "64eaa9b2-a63e-44c7-9f76-8738cd0d80a9"],
    "unit_of_measure": "THB",
    "aggregation_type": "CALCULATED_RATIO",
    "grain": "customer",
    "business_owner": "finance-team",
    "refresh_schedule": "weekly",
    "typical_range": {"min": 450, "median": 2850, "p95": 12500, "max": 48000},
    "related_metrics": ["clv", "aov", "purchase_frequency"],
    "common_filters": ["Order_Date >= DATEADD(month, -12, GETDATE())"],
    "tags": ["revenue", "customer", "segmentation"],
    "usage_frequency": 134,
    "last_queried": "2025-09-29T08:50:00Z",
    "embedding": {
      "model": "openai/text-embedding-3-small",
      "dimension": 1536,
      "vector": "[... 1536 dimensions ...]",
      "generated_at": "2025-09-29T10:15:00Z",
      "source": "metric_name + description + calculation_logic"
    }
  }
]